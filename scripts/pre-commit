#!/bin/bash
# Git pre-commit hook - è‡ªå‹•æ›´æ–°ç‰ˆæœ¬è™Ÿ

echo "ğŸ”„ Pre-commit: æ›´æ–°ç‰ˆæœ¬è™Ÿ..."

# é‹è¡Œç‰ˆæœ¬æ›´æ–°è…³æœ¬
node scripts/update_version.js

# æª¢æŸ¥ç‰ˆæœ¬æ›´æ–°æ˜¯å¦æˆåŠŸ
if [ $? -eq 0 ]; then
    echo "âœ… ç‰ˆæœ¬è™Ÿæ›´æ–°æˆåŠŸ"
    
    # å°‡ç‰ˆæœ¬æ–‡ä»¶æ·»åŠ åˆ°commitä¸­
    git add data/version.json
    
    echo "ğŸ“ ç‰ˆæœ¬æ–‡ä»¶å·²æ·»åŠ åˆ°commit"
else
    echo "âŒ ç‰ˆæœ¬è™Ÿæ›´æ–°å¤±æ•—"
    exit 1
fi

echo "ğŸ‰ Pre-commit å®Œæˆ"
